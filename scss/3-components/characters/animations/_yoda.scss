// ===========================================================
// Yoda Animations

// States in order:
// - State 1
// - State 4
// - State 2 and 3
// - State 2, 3 and 4

// ===========================================================
// Left foot: 1, 2 
// Right foot: 3, 4 
// First body part: 5-18
// Staff: 19-21
// Hand: 22-23
// Second body part: 24-30
// Head: 31-37
// Left eye: 38-41
// Head: 42-46
// Right eye: 47-50
// Head: 51-60
// Lower lid (for animation): 65, 66 

#yoda.run-animation {

  // State One
  &.char {

    .char__shard-wrap {
      .char__shard {
        transition: 1s ease;
      }

      // Make lower lid visible
      &:nth-child(65),
      &:nth-child(66) {
          z-index: 5;
      }
      
      /* Override staff original transform position */
      &:nth-child(19),
      &:nth-child(20),
      &:nth-child(21) {
          transform-origin: 54.063% 88.625%;
      }
    }
  }

  // State Four
  &.state-four.char {
    .char__shard-wrap {
      &:nth-child(19),
      &:nth-child(20),
      &:nth-child(21),
      &:nth-child(22) {
        transition: transform 0.5s 0.4s;
      }
    }
  }

  // State Two and Three
  &.state-two.char,
  &.state-three.char {

    .char__shard-wrap {
      &:nth-child(19),
      &:nth-child(20),
      &:nth-child(21),
      &:nth-child(22) {
        transform: rotateZ(2deg);
        transition: transform 0.5s;
      }

      &:nth-child(22) {
        transform: translateX(1%) translateY(1%) rotateZ(-5deg);
      }

      &:nth-child(23) .char__shard {
        clip-path: polygon(50.031% 49.125%, 57.969% 43.125%, 60.609% 48.25%);
        transition: clip-path 1s 0.5s;
      }

      &:nth-child(31),
      &:nth-child(32),
      &:nth-child(33),
      &:nth-child(34),
      &:nth-child(35),
      &:nth-child(36),
      &:nth-child(37),
      &:nth-child(38),
      &:nth-child(39),
      &:nth-child(40),
      &:nth-child(41),
      &:nth-child(42),
      &:nth-child(43),
      &:nth-child(44),
      &:nth-child(45),
      &:nth-child(46),
      &:nth-child(47),
      &:nth-child(48),
      &:nth-child(49),
      &:nth-child(50),
      &:nth-child(51),
      &:nth-child(52),
      &:nth-child(53),
      &:nth-child(54),
      &:nth-child(55),
      &:nth-child(56),
      &:nth-child(57),
      &:nth-child(58),
      &:nth-child(59),
      &:nth-child(60),
      &:nth-child(65),
      &:nth-child(66) {
        transform-origin: 43.359% 29.250%;
        transform: rotateZ(-5deg);
        transition: transform 1s 0.5s;
      }
    }
  }

  // State Two, Three and Four
  &.state-two.char,
  &.state-three.char,
  &.state-four.char {
    .char__shard-wrap {
      &:nth-child(65) .char__shard,
      &:nth-child(66) .char__shard {
        transition: clip-path 1s 0.3s;
      }
      &:nth-child(65) .char__shard {
        clip-path: polygon( 49.766% 20.000% ,51.953% 21.625% ,52.734% 20.000% );
      }
      &:nth-child(66) .char__shard {
        clip-path: polygon( 55.078% 20.625% ,56.094% 22.250% ,56.953% 20.875% );
      }
    }
  }
}